# CodeBattle AI

CodeBattle 这个项目诞生的初衷就是让程序员写AI控制游戏场景中的角色，进行对战。

这里提供一些AI的例子，你可以运行它们，来测试自己的AI。当你的AI战胜这些弱菜示例AI后，你就可以和你的好基友一起来一场AI对战。

## 基本概念和流程

1.  首先开启 [Client][1] 端， 创建一个房间。你会得到一个room id
2.  你的AI通过room id加入房间，目前一个房间只支持两个AI对战。
3.  加入房间后会随机的为你创建两个marine
4.  另一个AI通用通过此room id加入房间，此时你们双方都会收到startbattle的消息。
5.  最近尽情的开虐吧。

#### 地图尺寸

加入房间后 会得到 地图size，{x, z}。 （目前创建房间不可选地图，所以x, z固定为50个单位）。

    y     z
    |   /
    |  /
    | /
    |/____________ x 
    0

虽然marine只能在平面中移动，在游戏是三维世界， 所以还是按照 三维坐标来表示地图大小， 地图在 xz 平面， 所以用 x, z来表示地图大小。

x=0, z=0为地图 左下角， x=50, z=50 为地图右上角。

#### Marine

没错就是 星际争霸 中的Marine，（我建模的的时候就是参考这个做的）。
当成功joinroom后，会自动为你创建两个marine，并且将其信息放入 JoinRoomResponse 中返回。

对marine可进行下面的操作：

*   Run， 让其朝某个坐标点{x， z}移动
*   Flares，发射照明弹来获取敌人的状态。 （详细信息见下面的游戏规则）
*   GunAttack， 朝某个坐标点 {x, z}发射子弹。
*   Idle， 静止不动。

##### Marine的移动速度为每秒5个单位
##### Marine发射的子弹移动速度为每秒20个单位。
##### Marine初始生命值100，被GunAttack命中一次生命值减10. 生命值为0时 死亡。


## 游戏规则

当玩家都加入房间后，server发出startbattle指令后，游戏开始。

*   游戏初始你只知道自己Marine的状态。并不知道敌人的状态。

*   你可以发射照明弹（Flares）来照亮整个场景，从而获取到所有Marines的状态。

    发射照明弹的瞬间会获取一次状态，并且在1秒后server会再次将所有marine的状态发送给你。

    一旦你发射照明弹，你的状态也被暴露了，其他AI也就知道了你正在发射Flares的marine的状态。但1s后，你会继续获取整个场景中的状态，此时其他AI并不会得到你的状态。

    每个marine的 Flares是有数量限制的。 每个marine最有10个照明弹。

*   当你获取到敌人位置后，你可以进行 GunAttack

    GunAttack 只能制定 坐标点。

    一旦你进行了GunAttack, 你的状态就被暴露一次。其他AI会得到你的状态。

    GunAttack有冷却，间隔2秒才能进行下一次攻击。


*   同样，敌人进行 Flares 或者 GunAttack 的时候，你变知道了此Marine此时的状态。

*   当子弹命中一个marine时， 这个子弹的发射者，以及被命中者，都会对所有的AI暴露一次自己的状态。

*   如果游戏中某AI断开了链接，那么游戏会立即终止。没有获胜方。

    如果某一方的两个marine率先全部死亡，那么另一方获胜。

*   一局对战的时间限制为5分钟，如果在5分钟内没有任何一方的marine全部死亡，那么游戏终止，没有获胜方。



[1]: https://github.com/yueyoum/codebattle-client
